/* ===== [01] GLOBAL / THEME VARS =========================================== */
/* 한글 기본 폰트 & 색상 토큰 */
@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap');

:root{
  /* 본문(다크) */
  --bg-app: #0b1220;
  --fg: #E8EDFF;
  --fg-dim: #C7D2FE;
  --muted: #9CA3AF;

  /* 사이드바(더 진한 다크) */
  --bg-sidebar: #0f172a;
  --sidebar-border: #334155;

  /* 입력칸(라이트) */
  --input-bg: #ffffff;
  --input-fg: #111827;
  --input-placeholder: #555555;
  --input-border: #cbd5e1;     /* slate-300 */
  --input-border-focus: #7c5ad9;

  /* 버튼/포커스 등 포인트 컬러 */
  --accent: #7c5ad9;
  --accent-2: #9067C6;

  /* 카드/패널 */
  --panel: rgba(15, 23, 42, 0.90);     /* 다크 카드 */
  --panel-soft: rgba(17, 24, 39, 0.90);

  /* 코드/로그 */
  --code-fg: #CFE3FF;
}

/* ===== [02] BASE =========================================================== */
html, body, .stApp {
  font-family: 'Noto Sans KR', system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  background: var(--bg-app) !important;
  color: var(--fg) !important;
}

h1,h2,h3,h4,h5,h6{ color: var(--fg) !important; }
a { color: var(--accent-2); }
a:hover { color: #b59cf0; }

/* 헤더/툴바는 투명 처리 */
[data-testid="stHeader"], [data-testid="stToolbar"]{
  background: transparent !important;
  backdrop-filter: none !important;
  border: 0 !important;
}

/* 구분선 색 개선 */
hr { border-color: #334155 !important; opacity: .6; }

/* ===== [03] SIDEBAR (고대비) ============================================== */
[data-testid="stSidebar"]{
  display:block !important;
  background: var(--bg-sidebar) !important;
  border-right: 1px solid var(--sidebar-border) !important;
}
[data-testid="stSidebar"] *{ color: var(--fg) !important; }
[data-testid="stSidebar"] .stButton>button{
  background:#334155 !important; border:1px solid #475569 !important; color:#fff !important;
}
[data-testid="stSidebar"] .stButton>button:hover{ background:#3f4a63 !important; }

/* ===== [04] INPUTS (텍스트/비밀번호/텍스트에어리어/셀렉트) ================== */
/* 핵심: 입력칸은 라이트(흰 배경 + 진한 글자)로 확실히 구분 */
[data-testid="stTextInput"] input,
input[type="text"], input[type="password"],
textarea, [data-baseweb="textarea"] textarea {
  background: var(--input-bg) !important;
  color: var(--input-fg) !important;
  caret-color: var(--input-fg) !important;
  border: 1px solid var(--input-border) !important;
  border-radius: 10px !important;
  box-shadow: none !important;
}

[data-testid="stTextInput"] input::placeholder,
textarea::placeholder, ::placeholder {
  color: var(--input-placeholder) !important;
}

[data-testid="stTextInput"] input:focus,
input[type="text"]:focus, input[type="password"]:focus,
textarea:focus, [data-baseweb="textarea"] textarea:focus {
  outline: none !important;
  border-color: var(--input-border-focus) !important;
  box-shadow: 0 0 0 2px rgba(124,90,217,.25) !important;
}

/* Selectbox / Multiselect 내부 input(검색창) */
.stSelectbox [role="combobox"] input,
.stMultiSelect [role="combobox"] input {
  background: var(--input-bg) !important;
  color: var(--input-fg) !important;
}

/* 파일 업로더 패널도 라이트 톤으로 */
[data-testid="stFileUploader"] > section {
  background: #f8fafc !important;
  color: #111827 !important;
  border: 1px dashed #cbd5e1 !important;
  border-radius: 10px !important;
}

/* 슬라이더/라디오/체크박스 라벨 색 보정 */
[data-testid="stRadio"] label p,
[data-testid="stSlider"] * { color: var(--fg) !important; }

/* ===== [05] BUTTONS ======================================================== */
.stButton>button{
  border-radius: 999px;
  border: 1px solid #6b7280;
  background: #4f46e5;           /* indigo-600 */
  color: #fff;
  font-weight: 700;
  padding: 10px 18px;
  transition: .15s ease;
}
.stButton>button:hover{
  background:#4338ca;            /* indigo-700 */
  border-color:#818cf8;
}

/* ===== [06] PANELS / ALERTS / CARDS ======================================= */
[data-testid="stAlert"]{
  background: var(--panel-soft) !important;
  border: 1px solid #334155 !important;
  border-radius: 10px !important;
}
[data-testid="stAlert"] p{ color: var(--fg) !important; }

/* expander 헤더 대비 */
.streamlit-expanderHeader{
  background: #0d1629 !important;
  border: 1px solid #273449 !important;
  border-radius: 8px !important;
}

/* ===== [07] CHAT BUBBLES =================================================== */
[data-testid="stChatMessage"]{
  background: var(--panel);
  border: 1px solid #273449;
  border-radius: 12px; padding: 1rem; margin-bottom: 1rem;
}
[data-testid="stChatMessage"] p, [data-testid="stChatMessage"] li{
  color: var(--fg) !important;
}

/* ===== [08] PROGRESS BAR =================================================== */
.gp-wrap{ width:100%; height:28px; border-radius:12px;
  background:#1f2937; border:1px solid #334155;
  position:relative; overflow:hidden; box-shadow: 0 4px 14px rgba(0,0,0,.25);
}
.gp-fill{ height:100%; background: linear-gradient(90deg,#7c5ad9,#9067C6); transition: width .25s ease; }
.gp-label{ position:absolute; inset:0; display:flex; align-items:center; justify-content:center;
  font-weight:800; color:#E8EDFF; text-shadow: 0 1px 2px rgba(0,0,0,.5); font-size:18px; pointer-events:none; }
.gp-msg{ margin-top:.5rem; color:#E8EDFF; opacity:.9; font-size:0.95rem; }

/* ===== [09] TABLE / DATAFRAME ============================================= */
.stTable, .stDataFrame { color: var(--fg) !important; }
.stTable th, .stDataFrame th { background:#0f172a !important; }
.stTable td, .stDataFrame td { background:#0b1220 !important; }

/* ===== [10] CODE / LOGS ==================================================== */
pre, code{ color: var(--code-fg) !important; background: #0f172a !important; }

/* ===== [11] MISC =========================================================== */
/* 상태 배지/토스트 등이 너무 어둡게 깔리지 않도록 */
[data-testid="stStatusWidget"] * { color: var(--fg) !important; }
